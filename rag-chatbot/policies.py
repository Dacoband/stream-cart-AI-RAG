# -*- coding: utf-8 -*-
"""
StreamCart Platform Policies
Ch√≠nh s√°ch Mua h√†ng v√† B√°n h√†ng c·ªßa n·ªÅn t·∫£ng StreamCart
"""

PURCHASE_POLICY = """
üõí CH√çNH S√ÅCH MUA H√ÄNG

1. ƒêI·ªÄU KI·ªÜN MUA H√ÄNG
‚Ä¢ Kh√°ch h√†ng ph·∫£i c√≥ t√†i kho·∫£n h·ª£p l·ªá, ƒë√£ x√°c th·ª±c email/s·ªë ƒëi·ªán tho·∫°i
‚Ä¢ T√†i kho·∫£n b·ªã kh√≥a ho·∫∑c ch∆∞a k√≠ch ho·∫°t s·∫Ω kh√¥ng th·ªÉ ƒë·∫∑t h√†ng
‚Ä¢ Cung c·∫•p th√¥ng tin ƒë·∫ßy ƒë·ªß v√† ch√≠nh x√°c

2. QUY TR√åNH ƒê·∫∂T H√ÄNG
‚Ä¢ Ch·ªâ c√≥ th·ªÉ ƒë·∫∑t s·∫£n ph·∫©m c√≤n h√†ng v√† ƒëang ·ªü tr·∫°ng th√°i "ƒëang b√°n"
‚Ä¢ H·ªá th·ªëng t·ª± ƒë·ªông t√≠nh to√°n gi√° cu·ªëi c√πng (gi√° g·ªëc + gi·∫£m gi√° + ph√≠ v·∫≠n chuy·ªÉn)
‚Ä¢ Sau khi ƒë·∫∑t h√†ng, nh·∫≠n th√¥ng tin chi ti·∫øt qua email/th√¥ng b√°o
‚Ä¢ Ph·∫£i x√°c nh·∫≠n ƒë∆°n h√†ng tr∆∞·ªõc khi thanh to√°n

3. THANH TO√ÅN
‚Ä¢ H√¨nh th·ª©c: Online (qua c·ªïng thanh to√°n) ho·∫∑c COD (thanh to√°n khi nh·∫≠n h√†ng)
‚Ä¢ ƒê∆°n h√†ng ch·ªâ x√°c nh·∫≠n khi thanh to√°n th√†nh c√¥ng ho·∫∑c x√°c nh·∫≠n COD
‚Ä¢ Thanh to√°n th·∫•t b·∫°i ‚Üí ƒë∆°n h√†ng t·ª± ƒë·ªông h·ªßy sau 30 ph√∫t
‚Ä¢ Tu√¢n th·ªß chu·∫©n b·∫£o m·∫≠t PCI DSS

4. V·∫¨N CHUY·ªÇN & GIAO H√ÄNG
‚Ä¢ Cung c·∫•p ƒë·ªãa ch·ªâ giao h√†ng h·ª£p l·ªá v√† ch√≠nh x√°c
‚Ä¢ Theo d√µi tr·∫°ng th√°i ƒë∆°n h√†ng theo th·ªùi gian th·ª±c
‚Ä¢ Tr·∫°ng th√°i: Pending ‚Üí Processing ‚Üí Shipping ‚Üí Completed/Canceled
‚Ä¢ Giao kh√¥ng th√†nh c√¥ng nhi·ªÅu l·∫ßn ‚Üí c√≥ th·ªÉ b·ªã h·ªßy ƒë∆°n

5. ƒê·ªîI TR·∫¢ & HO√ÄN TI·ªÄN
‚Ä¢ √Åp d·ª•ng ƒë·ªïi tr·∫£ trong th·ªùi h·∫°n ch√≠nh s√°ch c·ªßa shop (th∆∞·ªùng 3 ng√†y t·ª´ ng√†y giao th√†nh c√¥ng)
‚Ä¢ S·∫£n ph·∫©m ph·∫£i c√≤n nguy√™n tem, nh√£n m√°c, ch∆∞a qua s·ª≠ d·ª•ng (tr·ª´ s·∫£n ph·∫©m l·ªói)
‚Ä¢ Ti·ªÅn ho√†n tr·∫£ theo ph∆∞∆°ng th·ª©c thanh to√°n ban ƒë·∫ßu
‚Ä¢ H·ªá th·ªëng ghi nh·∫≠n l·ªãch s·ª≠ ƒë·ªÉ ph√≤ng tr√°nh gian l·∫≠n

6. QUY·ªÄN & NGHƒ®A V·ª§ KH√ÅCH H√ÄNG
Quy·ªÅn:
‚Ä¢ Khi·∫øu n·∫°i khi s·∫£n ph·∫©m sai m√¥ t·∫£, l·ªói ho·∫∑c giao kh√¥ng ƒë√∫ng cam k·∫øt
‚Ä¢ Theo d√µi ƒë∆°n h√†ng v√† y√™u c·∫ßu h·ªó tr·ª£

Nghƒ©a v·ª•:
‚Ä¢ B·∫£o m·∫≠t th√¥ng tin t√†i kho·∫£n, kh√¥ng chia s·∫ª m·∫≠t kh·∫©u
‚Ä¢ Thanh to√°n ƒë·∫ßy ƒë·ªß v√† ƒë√∫ng h·∫°n
‚Ä¢ Kh√¥ng l·ª£i d·ª•ng ch√≠nh s√°ch ƒë·ªïi tr·∫£/ho√†n ti·ªÅn ƒë·ªÉ tr·ª•c l·ª£i
"""

SALES_POLICY = """
üè™ CH√çNH S√ÅCH B√ÅN H√ÄNG

1. ƒêI·ªÄU KI·ªÜN M·ªû SHOP
‚Ä¢ ƒêƒÉng k√Ω shop v·ªõi th√¥ng tin ƒë·∫ßy ƒë·ªß (t√™n, ƒë·ªãa ch·ªâ, s·ªë ƒëi·ªán tho·∫°i)
‚Ä¢ Shop ph·∫£i ƒë∆∞·ª£c Admin duy·ªát tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu kinh doanh
‚Ä¢ M·ªói t√†i kho·∫£n ch·ªâ ƒë∆∞·ª£c qu·∫£n l√Ω m·ªôt shop duy nh·∫•t

2. QU·∫¢N L√ù S·∫¢N PH·∫®M
‚Ä¢ Ch·ªâ ƒë∆∞·ª£c ƒëƒÉng b√°n s·∫£n ph·∫©m thu·ªôc danh m·ª•c h·ªá th·ªëng h·ªó tr·ª£
‚Ä¢ Th√¥ng tin s·∫£n ph·∫©m ph·∫£i ch√≠nh x√°c: t√™n, m√¥ t·∫£, gi√°, t·ªìn kho, h√¨nh ·∫£nh
‚Ä¢ H·ªá th·ªëng t·ª± ƒë·ªông t√≠nh s·ªë l∆∞·ª£ng ƒë√£ b√°n v√† c·∫≠p nh·∫≠t t·ªìn kho
‚Ä¢ Kh√¥ng ƒë∆∞·ª£c ch·ªânh s·ª≠a l·ªãch s·ª≠ giao d·ªãch ƒë√£ ho√†n t·∫•t
‚Ä¢ Ch·ªâ b√°n s·∫£n ph·∫©m h·ª£p ph√°p, kh√¥ng vi ph·∫°m quy ƒë·ªãnh

3. X·ª¨ L√ù ƒê·ª†N H√ÄNG
‚Ä¢ X√°c nh·∫≠n ƒë∆°n h√†ng trong 1 ng√†y
‚Ä¢ Chu·∫©n b·ªã v√† ƒë√≥ng g√≥i h√†ng trong 1 ng√†y
‚Ä¢ B√†n giao cho ƒë∆°n v·ªã v·∫≠n chuy·ªÉn ƒë√∫ng th·ªùi h·∫°n
‚Ä¢ C·∫≠p nh·∫≠t tr·∫°ng th√°i ƒë∆°n h√†ng th∆∞·ªùng xuy√™n

4. CH√çNH S√ÅCH GI√Å & KHUY·∫æN M√ÉI
‚Ä¢ ƒê∆∞·ª£c ƒë·∫∑t gi√° g·ªëc, gi√° khuy·∫øn m√£i v√† m·ª©c gi·∫£m ph·∫ßn trƒÉm
‚Ä¢ Gi√° hi·ªÉn th·ªã cho kh√°ch lu√¥n l√† gi√° cu·ªëi c√πng ƒë√£ √°p d·ª•ng gi·∫£m gi√°
‚Ä¢ Ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i ph·∫£i qua duy·ªát tr∆∞·ªõc khi √°p d·ª•ng

5. TR√ÅCH NHI·ªÜM & NGHƒ®A V·ª§
‚Ä¢ Cung c·∫•p s·∫£n ph·∫©m ƒë√∫ng m√¥ t·∫£, ƒë√∫ng ch·∫•t l∆∞·ª£ng
‚Ä¢ Kh√¥ng b√°n h√†ng gi·∫£, h√†ng nh√°i
‚Ä¢ Ch·∫•p h√†nh quy ƒë·ªãnh v·ªÅ ƒë·ªïi tr·∫£ v√† h·ªó tr·ª£ kh√°ch h√†ng
‚Ä¢ Tu√¢n th·ªß ch√≠nh s√°ch v·ªÅ thu·∫ø, h√≥a ƒë∆°n v√† ph√°p lu·∫≠t th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠

6. X·ª¨ L√ù VI PH·∫†M
Vi ph·∫°m (gian l·∫≠n, b√°n h√†ng gi·∫£, sai m√¥ t·∫£, giao ch·∫≠m nhi·ªÅu l·∫ßn):
‚Ä¢ M·ª©c 1: C·∫£nh c√°o
‚Ä¢ M·ª©c 2: T·∫°m ng∆∞ng ho·∫°t ƒë·ªông
‚Ä¢ M·ª©c 3: ƒê√≥ng c·ª≠a shop vƒ©nh vi·ªÖn
‚Ä¢ C√°c tr∆∞·ªùng h·ª£p nghi√™m tr·ªçng: x·ª≠ l√Ω theo ph√°p lu·∫≠t
"""

GENERAL_TERMS = """
üìã ƒêI·ªÄU KHO·∫¢N CHUNG

‚Ä¢ C·∫£ kh√°ch h√†ng v√† ng∆∞·ªùi b√°n ph·∫£i tu√¢n th·ªß ƒë·∫ßy ƒë·ªß quy ƒë·ªãnh c·ªßa h·ªá th·ªëng
‚Ä¢ M·ªçi giao d·ªãch ƒë∆∞·ª£c ghi nh·∫≠n v√† c√≥ th·ªÉ d√πng l√†m b·∫±ng ch·ª©ng khi tranh ch·∫•p
‚Ä¢ H·ªá th·ªëng c√≥ quy·ªÅn ƒëi·ªÅu ch·ªânh ch√≠nh s√°ch ƒë·ªÉ ph√π h·ª£p t√¨nh h√¨nh th·ª±c t·∫ø
‚Ä¢ ƒê·∫£m b·∫£o c√¥ng b·∫±ng v√† b·∫£o v·ªá quy·ªÅn l·ª£i cho c·∫£ hai b√™n
‚Ä¢ H·ªó tr·ª£ kh√°ch h√†ng: 8h-22h h√†ng ng√†y qua chat tr·ª±c ti·∫øp ho·∫∑c m·ª•c Tr·ª£ gi√∫p
"""

def get_purchase_policy():
    """L·∫•y ch√≠nh s√°ch mua h√†ng"""
    return PURCHASE_POLICY

def get_sales_policy():
    """L·∫•y ch√≠nh s√°ch b√°n h√†ng"""
    return SALES_POLICY

def get_general_terms():
    """L·∫•y ƒëi·ªÅu kho·∫£n chung"""
    return GENERAL_TERMS

def get_full_policy():
    """L·∫•y to√†n b·ªô ch√≠nh s√°ch"""
    return f"{PURCHASE_POLICY}\n\n{SALES_POLICY}\n\n{GENERAL_TERMS}"

def search_policy(query: str) -> str:
    """T√¨m ki·∫øm th√¥ng tin ch√≠nh s√°ch d·ª±a tr√™n t·ª´ kh√≥a"""
    query_lower = query.lower()
    
    # Mapping keywords to specific policy sections
    policy_keywords = {
        'mua h√†ng': PURCHASE_POLICY,
        'ƒë·∫∑t h√†ng': PURCHASE_POLICY,
        'thanh to√°n': PURCHASE_POLICY,
        'giao h√†ng': PURCHASE_POLICY,
        'v·∫≠n chuy·ªÉn': PURCHASE_POLICY,
        'ƒë·ªïi tr·∫£': PURCHASE_POLICY,
        'ho√†n ti·ªÅn': PURCHASE_POLICY,
        'b√°n h√†ng': SALES_POLICY,
        'm·ªü shop': SALES_POLICY,
        'ƒëƒÉng k√Ω shop': SALES_POLICY,
        'qu·∫£n l√Ω s·∫£n ph·∫©m': SALES_POLICY,
        'x·ª≠ l√Ω ƒë∆°n h√†ng': SALES_POLICY,
        'vi ph·∫°m': SALES_POLICY,
        'khuy·∫øn m√£i': SALES_POLICY,
        'ch√≠nh s√°ch gi√°': SALES_POLICY
    }
    
    # Find matching policies
    results = []
    for keyword, policy in policy_keywords.items():
        if keyword in query_lower and policy not in results:
            results.append(policy)
    
    if not results:
        return get_full_policy()
    
    return '\n\n'.join(results)
